<html>
<head>
<title>Arrays</title>
<link rel="stylesheet" type="text/css" href="style.css">
<meta charset="UTF-8">
</head>
<body>
<div id="fb_body_wrapper">
<div id="fb_tab">
<div id="fb_tab_l">Arrays</div>
<div id="fb_tab_r">&nbsp;<a href="00index.html"><img src="images/fblogo_mini.gif" /></a></div> 
</div> 
<div id="fb_pg_wrapper">
<div id="fb_pg_body">
	An array in fbc is a collection of elements where each element has the same type and is accessed with an index in to the array.<br \>
<br \>
Example:<br \>
<tt><div class="freebasic">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="com">''&nbsp;one&nbsp;dimensional&nbsp;array&nbsp;(1&nbsp;index)</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">Dim</span>&nbsp;<span class="wrd">a</span><span class="oth">(</span><span class="num">1</span>&nbsp;<span class="key">To</span>&nbsp;<span class="num">10</span><span class="oth">)</span>&nbsp;<span class="key">As</span>&nbsp;<span class="key">Integer</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">Print</span>&nbsp;<span class="wrd">a</span><span class="oth">(</span><span class="num">1</span><span class="oth">)</span>&nbsp;&nbsp;<span class="com">''&nbsp;first&nbsp;element&nbsp;(integer)</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">Print</span>&nbsp;<span class="wrd">a</span><span class="oth">(</span><span class="num">10</span><span class="oth">)</span>&nbsp;<span class="com">''&nbsp;last&nbsp;element&nbsp;(integer)</span><br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="com">''&nbsp;two&nbsp;dimensional&nbsp;array&nbsp;(2&nbsp;indexes)</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">Dim</span>&nbsp;<span class="wrd">b</span><span class="oth">(</span><span class="num">1</span>&nbsp;<span class="key">To</span>&nbsp;<span class="num">2</span><span class="oth">,</span>&nbsp;<span class="num">1</span>&nbsp;<span class="key">To</span>&nbsp;<span class="num">5</span><span class="oth">)</span>&nbsp;<span class="key">As</span>&nbsp;<span class="key">Integer</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">Print</span>&nbsp;<span class="wrd">b</span><span class="oth">(</span><span class="num">1</span><span class="oth">,</span><span class="num">1</span><span class="oth">)</span>&nbsp;<span class="com">''&nbsp;first&nbsp;element&nbsp;(integer)</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">Print</span>&nbsp;<span class="wrd">b</span><span class="oth">(</span><span class="num">2</span><span class="oth">,</span><span class="num">5</span><span class="oth">)</span>&nbsp;<span class="com">''&nbsp;last&nbsp;element&nbsp;(integer)</span><br />
</div></tt><br />
<br \>
<b><u>Array Dimensions and Bounds</u></b><br \>
<br \>
The number of dimensions refers to the number of indexes that are required to be given to access an element of an array.  The number of dimensions may or may not be part of the declaration.  If the number of dimensions are known at compile time within the scope that the array is used, fbc can check and error if the wrong number of indexes are specified.<br \>
<br \>
The bounds of an array are the allowable minimum and maximum index values for each dimension.  Accessing an array element with an index or indexes that are outside the array bounds of a dimension is undefined behaviour.<br \>
<br \>
fbc can check and error if an index or indexes (access) are outside the bounds of the array when compiled with '-exx' or '-earray' compile options.  If the array bounds are compile-time constant, and the array access is compile-time constant, fbc can check if an array access is outside the bounds of the array at compile time.  Otherwise, the array bounds check must occur at run-time if either the bounds or the access is non-constant.<br \>
<br \>
<b><u>Fixed dimension versus unknown dimension</u></b><br \>
<br \>
The number of dimensions may be fixed or unknown.  fbc will attempt to determine the number of dimensions an array is expected to have based on declarations for the array.  If fbc cannot determine the number of dimensions at compile time, the number of dimensions will become fixed on first redimension of the array at run time.<br \>
<br \>
Example: fixed 2 dimension, dynamic bounds<br \>
<tt><div class="freebasic">
<span class="key">Dim</span>&nbsp;<span class="wrd">a</span><span class="oth">(</span><span class="key">Any</span><span class="oth">,</span>&nbsp;<span class="key">Any</span><span class="oth">)</span>&nbsp;<span class="key">As</span>&nbsp;<span class="key">Integer</span><br />
<span class="key">ReDim</span>&nbsp;<span class="wrd">a</span><span class="oth">(</span><span class="num">1</span>&nbsp;<span class="key">To</span>&nbsp;<span class="num">2</span><span class="oth">,</span>&nbsp;<span class="num">1</span>&nbsp;<span class="key">To</span>&nbsp;<span class="num">5</span><span class="oth">)</span><br />
</div></tt><br />
<br \>
Example: Dynamic dimension, dynamic bounds<br \>
<tt><div class="freebasic">
<span class="key">Dim</span>&nbsp;<span class="wrd">a</span><span class="oth">()</span>&nbsp;<span class="key">As</span>&nbsp;<span class="key">Integer</span><br />
<br />
<span class="com">''&nbsp;then&nbsp;only&nbsp;one&nbsp;of&nbsp;on&nbsp;first&nbsp;time&nbsp;use&nbsp;...</span><br />
<span class="key">ReDim</span>&nbsp;<span class="wrd">a</span><span class="oth">(</span><span class="num">1</span>&nbsp;<span class="key">To</span>&nbsp;<span class="num">10</span><span class="oth">)</span><br />
<span class="key">ReDim</span>&nbsp;<span class="wrd">a</span><span class="oth">(</span><span class="num">1</span>&nbsp;<span class="key">To</span>&nbsp;<span class="num">2</span><span class="oth">,</span>&nbsp;<span class="num">1</span>&nbsp;<span class="key">To</span>&nbsp;<span class="num">5</span><span class="oth">)</span><br />
<span class="key">ReDim</span>&nbsp;<span class="wrd">a</span><span class="oth">(</span><span class="num">1</span>&nbsp;<span class="key">To</span>&nbsp;<span class="num">2</span><span class="oth">,</span>&nbsp;<span class="num">1</span>&nbsp;<span class="key">To</span>&nbsp;<span class="num">5</span><span class="oth">,</span>&nbsp;<span class="num">1</span>&nbsp;<span class="key">To</span>&nbsp;<span class="num">3</span><span class="oth">)</span><br />
</div></tt><br />
<br \>
Once number of dimensions are known to fbc, within the scope of the array, fbc will error if any access to the error has wrong number of dimensions.  Or if still unknown at compile time, as in the case of an array passed as argument to a procedure and resized, the number of dimensions become fixed at run time.<br \>
<br \>
<b><u>Fixed bounds versus Dynamic bounds</u></b><br \>
<br \>
Fixed length arrays have array bounds that are known at compile-time.  Dynamic (or variable length) arrays have array bounds that can be altered and resized at run-time, and may be considered unknown at compile time.<br \>
<br \>
Example: fixed (constant) bounds and constant access<br \>
<tt><div class="freebasic">
<span class="key">Dim</span>&nbsp;<span class="wrd">a</span><span class="oth">(</span><span class="num">1</span>&nbsp;<span class="key">To</span>&nbsp;<span class="num">10</span><span class="oth">)</span>&nbsp;<span class="key">As</span>&nbsp;<span class="key">Integer</span><br />
<span class="key">Print</span>&nbsp;<span class="wrd">a</span><span class="oth">(</span><span class="num">11</span><span class="oth">)</span>&nbsp;<span class="com">''&nbsp;compile&nbsp;time&nbsp;array&nbsp;out-of-bounds</span><br />
</div></tt><br />
<br \>
Example: fixed bounds and non-constant access<br \>
<tt><div class="freebasic">
<span class="key">Dim</span>&nbsp;<span class="wrd">a</span><span class="oth">(</span><span class="num">1</span>&nbsp;<span class="key">To</span>&nbsp;<span class="num">10</span><span class="oth">)</span>&nbsp;<span class="key">As</span>&nbsp;<span class="key">Integer</span><br />
<span class="key">Dim</span>&nbsp;<span class="wrd">i</span>&nbsp;<span class="key">As</span>&nbsp;<span class="key">Integer</span><br />
<span class="key">Print</span>&nbsp;<span class="wrd">a</span><span class="oth">(</span><span class="wrd">i</span><span class="oth">)</span>&nbsp;<span class="com">''&nbsp;run&nbsp;time&nbsp;array&nbsp;out-of-bounds</span><br />
</div></tt><br />
<br \>
Example: dynamic bounds<br \>
<tt><div class="freebasic">
<span class="key">Dim</span>&nbsp;<span class="wrd">a</span><span class="oth">(</span><span class="key">Any</span><span class="oth">)</span>&nbsp;<span class="key">As</span>&nbsp;<span class="key">Integer</span>&nbsp;<span class="com">''&nbsp;1&nbsp;dimensional,&nbsp;empty</span><br />
<span class="key">ReDim</span>&nbsp;<span class="wrd">a</span><span class="oth">(</span><span class="num">1</span>&nbsp;<span class="key">To</span>&nbsp;<span class="num">10</span><span class="oth">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="com">''&nbsp;resized&nbsp;to&nbsp;10&nbsp;elements</span><br />
<span class="key">Print</span>&nbsp;<span class="wrd">a</span><span class="oth">(</span><span class="num">11</span><span class="oth">)</span>&nbsp;<span class="com">''&nbsp;run&nbsp;time&nbsp;array&nbsp;out-of-bounds</span><br />
<span class="key">Print</span>&nbsp;<span class="wrd">a</span><span class="oth">(</span><span class="wrd">i</span><span class="oth">)</span>&nbsp;&nbsp;<span class="com">''&nbsp;run&nbsp;time&nbsp;array&nbsp;out-of-bounds</span><br />
</div></tt><br />
<br \>
<b><u>Static Array versus Dynamic Array</u></b><br \>
<br \>
Arrays may have static or dynamic memory allocation.  The descriptor may be static or dynamic, and memory space for the data may be static or dynamic.  The terms static and dynamic may be overused and so may lose meaning when describing an array.  In this context static versus dynamic should not be confused with fixed-length or variable-length.  In this context we are referring to how and where the array descriptor and it's associated data are allocated in memory, and to some extent the life time of the variable.<br \>
<br \>
For an array descriptor to be valid, it must be initialized.  An uninitialized array descriptor will almost certainly lead to undefined behaviour at run time.<br \>
<br \>
The array descriptor itself may be allocated in .bss, .data, on stack or on heap, depending on the declaration of the array.  Though typically not in .bss section because an array descriptor usually must be initialized to some non-zero default values to be usable.<br \>
<br \>
The array's data may be located in .bss section, .data section, on stack or on heap, depending on the declaration of the array.  In fbc's current implementation, the array data for variable-length arrays is always allocated on the heap (i.e. malloc()).<br \>
<br \>
<b><u>Array Descriptor</u></b><br \>
<br \>
See <a href="KeyPgFBArray.html">Fbarray (Array Descriptor Structure And Access)</a>.<br \>
<br \>
<br \>
<br \>

</div>
</div> 
</div> 
</body>
</html>
