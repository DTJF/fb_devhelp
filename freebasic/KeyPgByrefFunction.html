<html>
<head>
<title>Byref (Function Results)</title>
<link rel="stylesheet" type="text/css" href="style.css">
<meta charset="UTF-8">
</head>
<body>
<div id="fb_body_wrapper">
<div id="fb_tab">
<div id="fb_tab_l">Byref (Function Results)</div>
<div id="fb_tab_r">&nbsp;<a href="00index.html"><img src="images/fblogo_mini.gif" /></a></div> 
</div> 
<div id="fb_pg_wrapper">
<div id="fb_pg_body">
	Specifies that a function result is returned by reference<br \>
<br \>
<div class="fb_sect_title">Syntax</div><div class="fb_sect_cont"><tt><br \>
<a href="KeyPgFunction.html">Function</a> <i>name</i> ( <i>parameter-list</i> ) <b>ByRef</b> <a href="KeyPgAs.html">As</a> <i><a href="DataType.html">datatype</a></i><br \>
</tt><br \>
</div><div class="fb_sect_title">Description</div><div class="fb_sect_cont"><br \>
Causes the function result to be returned by reference, rather than by value. A function returning <tt><b>ByRef</b></tt> will return the address of a variable, instead of making a copy like when returning by value. This allows the caller of the function to modify the variable which the function result points to.<br \>
<br \>
If <tt><b>ByRef</b></tt> is not specified, the default is to return the function result by value.<br \>
<br \>
Functions with <tt><b>ByRef</b></tt> result should not return local variables from the function, because they will be destroyed upon returning from the function, invalidating any pointer or reference to them. To help with writing safe code, the compiler will show an error message when a local variable is used with <tt>Function = <i>x</i></tt> (or <tt><i>name</i> = <i>x</i></tt>) assignments and <tt>Return <i>x</i></tt> statements.<br \>
<br \>
<b>Note:</b> On the left-hand side of an assignment expression using the '<tt>=</tt>' symbol, the result of the function (returned by reference) must be enclosed in parentheses when the function calls one single argument, in order to solve the parsing ambiguity. '<tt>=&gt;</tt>' can be used for assignments, in place of '<tt>=</tt>', same as for initializers, allowing to avoid parsing ambiguity (without parentheses). As for the arguments list, it should always be surrounded with parentheses even if empty.<br \>
<br \>
Operators (member or global), when used as functions, have also the capability to return results by reference, by using the same syntax.<br \>
<br \>
</div><div class="fb_sect_title">Example</div><div class="fb_sect_cont"><br \>
<tt><div class="freebasic">
<span class="key">Function</span>&nbsp;<span class="wrd">min</span><span class="oth">(</span>&nbsp;<span class="key">ByRef</span>&nbsp;<span class="wrd">I</span>&nbsp;<span class="key">As</span>&nbsp;<span class="key">Integer</span>&nbsp;<span class="oth">,</span>&nbsp;<span class="key">ByRef</span>&nbsp;<span class="wrd">J</span>&nbsp;<span class="key">As</span>&nbsp;<span class="key">Integer</span>&nbsp;<span class="oth">)</span>&nbsp;<span class="key">ByRef</span>&nbsp;<span class="key">As</span>&nbsp;<span class="key">Integer</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="com">''&nbsp;The&nbsp;smallest&nbsp;integer&nbsp;will&nbsp;be&nbsp;returned&nbsp;by&nbsp;reference,&nbsp;no&nbsp;copy&nbsp;will&nbsp;be&nbsp;created.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">If</span>&nbsp;<span class="wrd">I</span>&nbsp;<span class="oth">&lt;</span>&nbsp;<span class="wrd">J</span>&nbsp;<span class="key">Then</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">Return</span>&nbsp;<span class="wrd">I</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">Else</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">Return</span>&nbsp;<span class="wrd">J</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">End</span>&nbsp;<span class="key">If</span><br />
<span class="key">End</span>&nbsp;<span class="key">Function</span><br />
<br />
<span class="key">Dim</span>&nbsp;<span class="key">As</span>&nbsp;<span class="key">Integer</span>&nbsp;<span class="wrd">A</span>&nbsp;<span class="oth">=</span>&nbsp;<span class="num">13</span><span class="oth">,</span>&nbsp;<span class="wrd">B</span>&nbsp;<span class="oth">=</span>&nbsp;<span class="num">7</span><br />
<span class="key">Print</span>&nbsp;<span class="wrd">A</span><span class="oth">,</span>&nbsp;<span class="wrd">B</span><br />
<span class="key">Print</span>&nbsp;<span class="wrd">min</span><span class="oth">(</span>&nbsp;<span class="wrd">A</span>&nbsp;<span class="oth">,</span>&nbsp;<span class="wrd">B</span>&nbsp;<span class="oth">)</span><br />
<span class="wrd">min</span><span class="oth">(</span>&nbsp;<span class="wrd">A</span>&nbsp;<span class="oth">,</span>&nbsp;<span class="wrd">B</span>&nbsp;<span class="oth">)</span>&nbsp;<span class="oth">=</span>&nbsp;<span class="num">0</span><br />
<span class="key">Print</span>&nbsp;<span class="wrd">A</span><span class="oth">,</span>&nbsp;<span class="wrd">B</span><br />
</div></tt><br />
<tt><div class="freebasic">
<span class="key">Function</span>&nbsp;<span class="wrd">f</span><span class="oth">(</span>&nbsp;<span class="oth">)</span>&nbsp;<span class="key">ByRef</span>&nbsp;<span class="key">As</span>&nbsp;<span class="key">Const</span>&nbsp;<span class="key">ZString</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="com">''&nbsp;This&nbsp;string&nbsp;literal&nbsp;(because&nbsp;statically&nbsp;allocated&nbsp;in&nbsp;memory)&nbsp;will&nbsp;be&nbsp;returned&nbsp;by&nbsp;reference,&nbsp;no&nbsp;copy&nbsp;will&nbsp;be&nbsp;created.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="key">Function</span>&nbsp;<span class="oth">=</span>&nbsp;<span class="quo">&quot;abcd&quot;</span><br />
<span class="key">End</span>&nbsp;<span class="key">Function</span><br />
<br />
<span class="key">Print</span>&nbsp;<span class="wrd">f</span><span class="oth">(</span>&nbsp;<span class="oth">)</span><br />
</div></tt><br />
<tt><div class="freebasic">
<span class="key">Dim</span>&nbsp;<span class="key">Shared</span>&nbsp;<span class="key">As</span>&nbsp;<span class="key">String</span>&nbsp;<span class="wrd">s</span><br />
<br />
<span class="key">Function</span>&nbsp;<span class="wrd">f1</span><span class="oth">(</span>&nbsp;<span class="oth">)</span>&nbsp;<span class="key">ByRef</span>&nbsp;<span class="key">As</span>&nbsp;<span class="key">String</span><br />
&nbsp;&nbsp;&nbsp;<span class="com">''&nbsp;This&nbsp;variable-length&nbsp;string&nbsp;will&nbsp;be&nbsp;returned&nbsp;by&nbsp;reference,&nbsp;no&nbsp;copy&nbsp;will&nbsp;be&nbsp;created.</span><br />
&nbsp;&nbsp;&nbsp;<span class="key">Function</span>&nbsp;<span class="oth">=</span>&nbsp;<span class="wrd">s</span><br />
<span class="key">End</span>&nbsp;<span class="key">Function</span><br />
<br />
<span class="key">Function</span>&nbsp;<span class="wrd">f2</span><span class="oth">(</span>&nbsp;<span class="key">ByRef</span>&nbsp;<span class="wrd">_s</span>&nbsp;<span class="key">As</span>&nbsp;<span class="key">String</span>&nbsp;<span class="oth">)</span>&nbsp;<span class="key">ByRef</span>&nbsp;<span class="key">As</span>&nbsp;<span class="key">String</span><br />
&nbsp;&nbsp;&nbsp;<span class="com">''&nbsp;This&nbsp;variable-length&nbsp;string&nbsp;will&nbsp;transit&nbsp;by&nbsp;reference&nbsp;(input&nbsp;and&nbsp;output),&nbsp;no&nbsp;copy&nbsp;will&nbsp;be&nbsp;created.</span><br />
&nbsp;&nbsp;&nbsp;<span class="key">Function</span>&nbsp;<span class="oth">=</span>&nbsp;<span class="wrd">_s</span><br />
<span class="key">End</span>&nbsp;<span class="key">Function</span><br />
<br />
<span class="wrd">s</span>&nbsp;<span class="oth">=</span>&nbsp;<span class="quo">&quot;abcd&quot;</span><br />
<span class="key">Print</span>&nbsp;<span class="wrd">s</span><br />
<br />
<span class="wrd">f1</span><span class="oth">(</span>&nbsp;<span class="oth">)</span>&nbsp;<span class="oth">=</span>&nbsp;<span class="wrd">f1</span><span class="oth">(</span>&nbsp;<span class="oth">)</span>&nbsp;<span class="oth">&amp;</span>&nbsp;<span class="quo">&quot;efgh&quot;</span><br />
<span class="key">Print</span>&nbsp;<span class="wrd">s</span><br />
<br />
<span class="com">''&nbsp;The&nbsp;enclosing&nbsp;parentheses&nbsp;are&nbsp;required&nbsp;here&nbsp;on&nbsp;the&nbsp;left-hand&nbsp;side.</span><br />
<span class="oth">(</span>&nbsp;<span class="wrd">f2</span><span class="oth">(</span>&nbsp;<span class="wrd">s</span>&nbsp;<span class="oth">)</span>&nbsp;<span class="oth">)</span>&nbsp;<span class="oth">=</span>&nbsp;<span class="wrd">f2</span><span class="oth">(</span>&nbsp;<span class="wrd">s</span>&nbsp;<span class="oth">)</span>&nbsp;<span class="oth">&amp;</span>&nbsp;<span class="quo">&quot;ijkl&quot;</span><br />
<span class="key">Print</span>&nbsp;<span class="wrd">s</span><br />
<br />
<span class="com">''&nbsp;The&nbsp;enclosing&nbsp;parentheses&nbsp;are&nbsp;not&nbsp;required&nbsp;here&nbsp;on&nbsp;the&nbsp;left-hand&nbsp;side.</span><br />
<span class="wrd">f2</span><span class="oth">(</span>&nbsp;<span class="wrd">s</span>&nbsp;<span class="oth">)</span>&nbsp;<span class="oth">=&gt;</span>&nbsp;<span class="wrd">f2</span><span class="oth">(</span>&nbsp;<span class="wrd">s</span>&nbsp;<span class="oth">)</span>&nbsp;<span class="oth">&amp;</span>&nbsp;<span class="quo">&quot;mnop&quot;</span><br />
<span class="key">Print</span>&nbsp;<span class="wrd">s</span><br />
</div></tt><br />
<tt><div class="freebasic">
<span class="key">Function</span>&nbsp;<span class="wrd">power2</span><span class="oth">(</span>&nbsp;<span class="key">ByRef</span>&nbsp;<span class="wrd">_I</span>&nbsp;<span class="key">As</span>&nbsp;<span class="key">Integer</span>&nbsp;<span class="oth">)</span>&nbsp;<span class="key">ByRef</span>&nbsp;<span class="key">As</span>&nbsp;<span class="key">Integer</span><br />
&nbsp;&nbsp;&nbsp;<span class="wrd">_I</span>&nbsp;<span class="oth">*=</span>&nbsp;<span class="wrd">_I</span><br />
&nbsp;&nbsp;&nbsp;<span class="com">''&nbsp;This&nbsp;integer&nbsp;will&nbsp;be&nbsp;returned&nbsp;by&nbsp;reference,&nbsp;no&nbsp;copy&nbsp;will&nbsp;be&nbsp;created.</span><br />
&nbsp;&nbsp;&nbsp;<span class="key">Function</span>&nbsp;<span class="oth">=</span>&nbsp;<span class="wrd">_I</span><br />
<span class="key">End</span>&nbsp;<span class="key">Function</span><br />
<br />
<span class="key">Dim</span>&nbsp;<span class="key">As</span>&nbsp;<span class="key">Integer</span>&nbsp;<span class="wrd">I</span>&nbsp;<span class="oth">=</span>&nbsp;<span class="num">2</span><br />
<span class="wrd">power2</span><span class="oth">(</span>&nbsp;<span class="wrd">power2</span><span class="oth">(</span>&nbsp;<span class="wrd">power2</span><span class="oth">(</span>&nbsp;<span class="wrd">I</span>&nbsp;<span class="oth">)</span>&nbsp;<span class="oth">)</span>&nbsp;<span class="oth">)</span>&nbsp;&nbsp;<span class="com">''&nbsp;Function&nbsp;return-byref&nbsp;cascading&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;((I*I)*(I*I))*((I*I)*(I*I))&nbsp;=&nbsp;I^8</span><br />
<span class="key">Print</span>&nbsp;<span class="wrd">I</span><br />
</div></tt><br />
<br \>
</div><div class="fb_sect_title">Differences from QB</div><div class="fb_sect_cont"><br \>
<ul><li> New to FreeBASIC<br \>
<br \>
</ul></div><div class="fb_sect_title">See also</div><div class="fb_sect_cont"><br \>
<ul><li> <a href="ProPgReturnValue.html">Returning values</a><br \>
<li> <tt><a href="KeyPgByref.html">Byref (Parameters)</a></tt><br \>
<li> <tt><a href="KeyPgByrefVariables.html">Byref (Variables)</a></tt><br \>
<br \>
</ul></div>
</div>
</div> 
</div> 
</body>
</html>
